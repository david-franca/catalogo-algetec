# Algetec Catálogo — Frontend

React + TypeScript application for the Algetec product catalog. Built with Vite and TanStack Router, styled with Tailwind CSS, state managed by Zustand, data fetching with React Query, schema validation via Zod, and HTTP handled by Axios.

Note: This README documents what is detected from the codebase. Unknown items are marked as TODO for maintainers to fill in.

## Overview
- SPA bootstrapped by Vite. Entry HTML mounts the app and loads the React bundle.
- File-based routing using TanStack Router plugin generates a route tree.
- Public routes include the login screen; authenticated routes require login and render an application shell with sidebar and header.
- Authentication state is persisted in localStorage (Zustand + persist). Axios Authorization header is configured after login.

## Tech Stack
- Language: TypeScript
- Framework: React 19
- Build tool: Vite 7
- Router: TanStack Router (file-based via @tanstack/router-plugin)
- State: Zustand
- Data fetching/cache: @tanstack/react-query (+ Devtools)
- Styling: Tailwind CSS v4
- UI: Radix UI primitives, lucide-react icons, sonner for toasts
- Forms/validation: react-hook-form, zod (@t3-oss/env-core for env validation)
- Linting: eslint (typescript-eslint, react plugins)
- Testing: Vitest (+ @testing-library), Playwright for e2e

## Requirements
- Node.js: LTS recommended (project tested with modern Node; align with vite 7 compatibility)
- Package manager: npm (package-lock.json present)

## Getting Started
1. Clone the repository
2. Install dependencies
   - npm install
3. Configure environment variables (see Environment Variables below)
4. Start the development server
   - npm run dev
5. Open the app
   - Vite default: http://localhost:5173
   - Note: Playwright config references http://localhost:5174 for the dev server; see TODO in Testing section.

## Scripts
Defined in package.json:
- dev: Start Vite dev server
- build: Type-check (tsc -b) then build with Vite
- preview: Preview the production build locally
- lint: Run ESLint
- lint:fix: Run ESLint with auto-fix
- test: Run unit/integration tests with Vitest (headless)
- test:ui: Run Vitest with the UI
- test:e2e: Run Playwright end-to-end tests
- test:e2e:ui: Run Playwright in UI mode
- coverage: Run Vitest with coverage (v8)

Commands:
- npm run dev
- npm run build
- npm run preview
- npm run lint
- npm run lint:fix
- npm test
- npm run test:ui
- npm run test:e2e
- npm run test:e2e:ui
- npm run coverage

## Environment Variables
Environment validation is handled by @t3-oss/env-core in src/env.ts. Client-side variables must be prefixed with VITE_.

Required variables:
- VITE_API_URL: Base URL for the backend API used by Axios (src/lib/axios.ts)

Example .env.local:
VITE_API_URL=http://localhost:3000

Place .env.local in the project root. Vite exposes import.meta.env to the client.

## Entry Points
- index.html: Mount point and script loader
  - Includes <div id="root"></div>
  - Loads /src/main.tsx as type="module"
- src/main.tsx: App bootstrap
  - Configures zod locale, creates TanStack Router from generated routeTree.gen.ts and renders <RouterProvider />.
- Routing is generated by TanStack Router plugin based on files under src/routes.

## Routing Structure (detected)
- src/routes/__root.tsx: Root layout
  - Wraps app in ThemeProvider and React Query provider; includes ReactQueryDevtools and Toaster; sets default page title
- src/routes/_public/
  - index.tsx: Login page (LoginForm)
  - signup.tsx: Placeholder signup page
  - recover.tsx: Placeholder password recovery page
- src/routes/_authenticated.tsx: Auth guard + layout (sidebar/header) and Outlet
- src/routes/_authenticated/dashboard.tsx: Dashboard page

Auth guard behavior:
- Uses useAuthStore.getState().isAuthenticated in beforeLoad to redirect unauthenticated users to / with a redirect param.

## State and API
- State: src/app/store/authStore.ts (Zustand with persist under key "auth-storage")
  - login(token, user): sets auth state and configures Axios Authorization header
  - logout(): clears header and state
  - On module load: re-applies login if token + user exist in storage
- API client: src/lib/axios.ts
  - baseURL from env.VITE_API_URL
  - Request interceptor placeholder present

## Styling
- Tailwind CSS v4 via @tailwindcss/vite plugin in Vite config
- Global styles imported in src/main.tsx via ./index.css

## Testing
- Unit/Component tests: Vitest
  - Config: vite.config.ts -> test section
  - JSDOM environment, setup file at tests/setup.ts
  - Run: npm test or npm run coverage
- Testing utilities: @testing-library/react, @testing-library/jest-dom, @testing-library/user-event
- Mocking: MSW server setup in tests/setup.ts (tests/mocks/server)
- E2E: Playwright
  - Tests path: ./e2e
  - Start dev server before tests via webServer in playwright.config.ts
  - Commands: npm run test:e2e, npm run test:e2e:ui
  - TODO: playwright.config.ts sets use.baseURL to http://localhost:5173 but webServer.url to http://localhost:5174. Confirm the intended port and align these values to avoid navigation issues during e2e runs.

## Project Structure
Top-level (selected):
- index.html — app entry HTML
- vite.config.ts — Vite and Vitest configuration (plugins: React SWC, TanStack Router, Tailwind, tsconfig paths)
- tsconfig*.json — TypeScript configs
- src/
  - main.tsx — React bootstrap
  - routeTree.gen.ts — Generated by TanStack Router (do not edit)
  - routes/ — File-based routes (public/authenticated)
  - app/store/authStore.ts — Auth store (Zustand)
  - env.ts — Environment variable definitions/validation
  - lib/axios.ts — Axios instance
  - components/ — UI and shared components (e.g., AppSidebar, UI primitives)
- tests/ — Vitest setup and mocks
- e2e/ — Playwright tests

## Setup and Run
1. Create .env.local with VITE_API_URL
2. Install dependencies: npm install
3. Start dev server: npm run dev (default http://localhost:5173)
4. Build for production: npm run build
5. Preview production build: npm run preview

## License
- TODO: Add license information and a LICENSE file in the repository root.

## Contributing
- TODO: Add contribution guidelines if applicable.

## Notes
- The route tree is generated automatically; do not edit src/routeTree.gen.ts.
- Authentication relies on API responses with a token and user object shape defined in features/authentication/schemas. Ensure backend compatibility.
